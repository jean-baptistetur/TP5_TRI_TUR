#include <stdio.h>

typedef struct {
    char nom[50];
    char prenom[50];
    int matricule;
    float moyenne;
} Etudiant;

void echanger(Etudiant* a, Etudiant* b) {
    Etudiant temp = *a;
    *a = *b;
    *b = temp;
}

int partition(Etudiant tab[], int bas, int haut) {
    float pivot = tab[haut].moyenne;
    int i = bas - 1;
    for (int j = bas; j < haut; j++) {
        if (tab[j].moyenne >= pivot) {
            i++;
            echanger(&tab[i], &tab[j]);
        }
    }
    echanger(&tab[i + 1], &tab[haut]);
    return i + 1;
}

void quicksort(Etudiant tab[], int bas, int haut) {
    if (bas < haut) {
        int pivotIndex = partition(tab, bas, haut);
        quicksort(tab, bas, pivotIndex - 1);
        quicksort(tab, pivotIndex + 1, haut);
    }
}

int main() {
    Etudiant etudiants[100];
    int N = 100;

    for (int i = 0; i < N; i++) {
        printf("Etudiant %d\n", i + 1);
        printf("Nom: ");
        scanf_s("%s", etudiants[i].nom, sizeof(etudiants[i].nom));
        printf("Prénom: ");
        scanf_s("%s", etudiants[i].prenom, sizeof(etudiants[i].prenom));
        printf("Matricule: ");
        scanf_s("%d", &etudiants[i].matricule);
        printf("Moyenne: ");
        scanf_s("%f", &etudiants[i].moyenne);
    }

    quicksort(etudiants, 0, N - 1);

    printf("\nListe des étudiants triée par moyenne décroissante:\n");
    for (int i = 0; i < N; i++) {
        printf("Nom: %s, Prénom: %s, Matricule: %d, Moyenne: %.2f\n",
            etudiants[i].nom, etudiants[i].prenom, etudiants[i].matricule, etudiants[i].moyenne);
    }

    return 0;
}
